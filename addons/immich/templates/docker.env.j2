# Immich Docker Environment Configuration
# Generated by Ansible

# Database
DB_HOSTNAME=immich-database
DB_USERNAME={{ immich_db_user }}
DB_PASSWORD={{ immich_db_password }}
DB_DATABASE_NAME={{ immich_db_name }}
DB_PORT={{ immich_db_port }}

# Redis
REDIS_HOSTNAME=immich-redis

# Immich Server
IMMICH_SERVER_URL=http://immich-server:{{ immich_server_port }}
IMMICH_PUBLIC_LOGIN_URL=http://localhost{{ immich_url_prefix }}/
{%- if immich_domain | length > 0 %}
IMMICH_PUBLIC_LOGIN_URL=https://{{ immich_domain }}/
{%- endif %}

# Storage
UPLOAD_LOCATION={{ immich_upload_path }}
LIBRARY_LOCATION={{ immich_library_path }}

# Machine Learning
MACHINE_LEARNING_HOST=immich-machine-learning
MACHINE_LEARNING_PORT={{ immich_machine_learning_port }}

# Logging
LOG_LEVEL={{ immich_log_level }}

# Performance
DISABLE_REVERSE_GEOCODING=false
ENABLE_MAP_TILE=true

# Security
JWT_SECRET={{ immich_db_password | hash('sha256') }}
API_KEY_SECRET={{ immich_db_password | hash('sha512') }}

# Admin (for initial setup)
IMMICH_ADMIN_EMAIL={{ immich_admin_email }}
IMMICH_ADMIN_PASSWORD={{ immich_admin_password }}

# Environment
NODE_ENV={{ immich_environment }}

# Workers
IMMICH_WORKERS={{ immich_workers }}

# Conversion
CONVERSION_THREADS={{ immich_conversion_threads }}
THUMBNAIL_SIZE={{ immich_thumbnail_size }}
PREVIEW_SIZE={{ immich_preview_size }}

# External paths
{%- if immich_external_library_path is defined %}
EXTERNAL_LIBRARY_PATH={{ immich_external_library_path }}
{%- endif %}

# Custom settings
{%- if immich_custom_settings is defined %}
{{ immich_custom_settings }}
{%- endif %}
